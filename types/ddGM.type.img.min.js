/* /////////////////////////////////////////////////////
 * img Type Loader for ddGM
 * v 1.0 :: 2012-10-02
//////////////////////////////////////////////////////*/
(function(){var a="img",b={initialize:function(c){c.resolve()},selector:function(f,h){var c=this,d,g;if(f.is("img")){h.src=f.attr("src");h.thumb=h.src;h.title=f.attr("alt");h.caption=h.title}else{if(f.is("a")&&f.children("img").length>0){d=f.children("img");g=f.attr("href").match(/.*\.(jpg|jpeg|gif|png)(?:$|\?)/i)||[,false];h.title=d.attr("alt");h.caption=h.title;if(f.data("type")!="link"&&(g[1]=="jpg"||g[1]=="jpeg"||g[1]=="gif"||g[1]=="png")){h.src=f.attr("href");h.thumb=d.attr("src")}else{if(f.data("type")!="img"){h.src=d.attr("src");h.thumb=h.src;h.link=f.attr("href");h.target=f.attr("target")}}}else{if(f.is("ul")&&f.data("type")=="img"){h.src=f.children('[data-item="content"]').children("img").length>0?f.children('[data-item="content"]').children("img").attr("src"):f.children('[data-item="content"]').children("a").children("img").attr("src");h.thumb=f.data("thumb")==undefined?h.src:f.data("thumb");h.title=f.children('[data-item="content"]').children("img").length>0?f.children('[data-item="content"]').children("img").attr("src"):f.children('[data-item="content"]').children("a").children("img").attr("alt");h.caption=(f.children('[data-item="caption"]').length>0)?f.children('[data-item="caption"]').html():h.title;h.link=f.children('[data-item="content"]').children("a").length>0?f.children('[data-item="content"]').children("a").attr("href"):"";h.target=f.children('[data-item="content"]').children("a").length>0?f.children('[data-item="content"]').children("a").attr("target"):"";h.extended=(f.children('[data-item="extended"]').length>0)?f.children('[data-item="extended"]').html():""}else{if(f.is("div")&&f.data("type")=="img"){h.src=f.data("src");h.thumb=f.data("thumb")==undefined?h.src:f.data("thumb");h.title=f.data("title");h.caption=f.data("caption")==undefined?h.title:f.data("caption");h.link=f.data("link")||"";h.target=f.data("target")||""}else{return false}}}}return window.ddGM.types[a].builder.call(c,h)},builder:function(d){var c=this;d.content+=d.link?'<a href="'+d.link+'" target="'+d.target+'">':"";d.content+='<img src="" data-type="'+a+'" class="ddGM-item '+d.id+'" alt="'+d.title+'" style=";position:absolute;left:0;top:0;" />';d.content+=d.link?"</a>":"";d.resizable=true;return c.addItem(d)},loader:function(c,e,d){d.append(e.content).ready(function(){d.find("."+e.id).css({display:"none"}).on("load",function(){$(this).off("load");c.resolve()}).attr("src",e.src)})}};if(!window.ddGM){window.ddGM={}}if(!window.ddGM.types){$.extend(window.ddGM,{types:{}})}window.ddGM.types[a]=b})();