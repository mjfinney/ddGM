/* /////////////////////////////////////////////////////
 * Arrows module for ddGM
 * v 1.0 :: 2012-10-02
//////////////////////////////////////////////////////*/
(function(){var b="arrows",a={hide:true,speed:200},c={initialize:function(e){var d=this,f="";d.opt.modules[b]=$.extend(a,d.opt.modules[b]);f+='<div class="ddGM-arrow-wrap ddGM-arrow-wrap-left" style="position: absolute; display:block; overflow:hidden;">';f+='<a class="ddGM-arrow ddGM-arrow-left" style="display:block; overflow:hidden;" href="">';f+='<span style="position:absolute; width:0; height:0;" />';f+="</a>";f+="</div>";f+='<div class="ddGM-arrow-wrap ddGM-arrow-wrap-right" style="position: absolute; display:block; overflow:hidden;">';f+='<a class="ddGM-arrow ddGM-arrow-right" style="display:block; overflow:hidden;" href="">';f+='<span style="position:absolute; width:0; height:0;" />';f+="</a>";f+="</div>";d.gal.append(f).ready(function(){d.obj.arrows=d.gal.find(".ddGM-arrow-wrap");d.states.arrowWidth=d.obj.arrows.width();d.obj.arrows.css({"z-index":d.layers.controls});if(d.opt.modules[b].hide){d.obj.arrows.css({width:0})}d.gal.on("click",".ddGM-arrow-left",function(g){g.preventDefault();if(!d.states.changing){d.states.navSource="left";d.rotateItems.call(d,false)}});d.gal.on("click",".ddGM-arrow-right",function(g){g.preventDefault();if(!d.states.changing){d.states.navSource="right";d.rotateItems.call(d,true)}});d.registerEvent("mouseIn",b,"showArrows");d.registerEvent("mouseOut",b,"hideArrows");d.registerEvent("loadStart",b,"positionArrows");d.registerEvent("resize",b,"positionArrows");d.registerEvent("unload",b,"unload");e.resolve()})},showArrows:function(e){var d=this;d.obj.arrows.stop(1,0).animate({width:d.states.arrowWidth},d.opt.modules[b].speed,function(){e.resolve()})},hideArrows:function(e){var d=this;if(d.opt.modules[b].hide){d.obj.arrows.stop(1,0).animate({width:0},d.opt.modules[b].speed,function(){e.resolve()})}},positionArrows:function(l){var k=this,h,d,j,f,e,g,i;h=k.obj.arrows.height();d=k.obj.arrows.children(".ddGM-arrow").width();j=k.obj.arrows.children(".ddGM-arrow").height();g=Math.floor(((d>j)?j:d)*0.75);f=Math.ceil(g*0.6);e=Math.ceil((f*1.1)/2);k.obj.arrows.find("span").css({top:Math.floor((j/2)-(e)),left:Math.floor(((d/2)-(f/2)-(f*0.1))),"border-left-width":"0","border-top":"solid transparent "+e+"px","border-bottom":"solid transparent "+e+"px","border-right-style":"solid","border-right-width":f+"px"});k.obj.arrows.find(".ddGM-arrow-right span").css({left:Math.floor(((d/2)-(f/2))+(f*0.1)),"border-right":"solid 0 transparent","border-left-style":"solid","border-left-width":f+"px"});i=Math.floor((k.obj.stageWrap.height()/2)-(h/2));k.obj.arrows.css({top:i});l.resolve()},unload:function(d){this.obj.arrows.off("click touchend");d.resolve()}};if(!window.ddGM){window.ddGM={}}if(!window.ddGM.modules){$.extend(window.ddGM,{modules:{}})}window.ddGM.modules[b]=c})();