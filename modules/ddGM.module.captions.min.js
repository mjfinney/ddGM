(function(){var e="captions",t={fadeSpeed:undefined,fadeOutSpeed:375,fadeInSpeed:750,internal:true,toControl:true,selectors:"",hide:true,hideDelay:2e3,slideSpeed:undefined,slideOutSpeed:375,slideInSpeed:750,showOnChange:true,showOnHover:true},d={initialize:function(d){var o=this,a="",s="",n=$(),i=$(),l=$();o.opt.modules[e]=$.extend(t,o.opt.modules[e]);o.opt.modules[e].fadeInSpeed=o.opt.modules[e].fadeSpeed==undefined?o.opt.modules[e].fadeInSpeed:o.opt.modules[e].fadeSpeed;o.opt.modules[e].fadeOutSpeed=o.opt.modules[e].fadeSpeed==undefined?o.opt.modules[e].fadeOutSpeed:o.opt.modules[e].fadeSpeed;o.opt.modules[e].slideInSpeed=o.opt.modules[e].slideSpeed==undefined?o.opt.modules[e].slideInSpeed:o.opt.modules[e].slideSpeed;o.opt.modules[e].slideOutSpeed=o.opt.modules[e].slideSpeed==undefined?o.opt.modules[e].slideOutSpeed:o.opt.modules[e].slideSpeed;a='<div class="ddGM-caption-wrapper" style="overflow:hidden" />';s='<span class="ddGM-caption">&nbsp;</span>';if(o.opt.modules[e].internal){n=o.opt.modules[e].toControl?n.add(o.obj.control):n.add(o.gal)}if(o.opt.modules[e].selectors){i=i.add(o.opt.modules[e].selectors)}l=l.add(n).add(i);l.append(a).ready(function(){o.obj.capWrapAll=l.find(".ddGM-caption-wrapper");o.obj.capWrapInternal=$();if(o.opt.modules[e].internal){o.obj.capWrapInternal=o.gal.find(".ddGM-caption-wrapper");o.obj.capWrapInternal.css({zIndex:o.layers.indicators,position:o.opt.modules[e].toControl?"":"position:absolute;",width:"100%",height:0})}o.obj.capWrapExternal=$();if(o.opt.modules[e].selectors){o.obj.capWrapExternal=l.not(o.obj.control).not(o.gal).find(".ddGM-caption-wrapper")}o.obj.capWrapAll.html(s).ready(function(){o.obj.capAll=o.obj.capWrapAll.find(".ddGM-caption");o.obj.capInternal=o.obj.capWrapInternal.find(".ddGM-caption");o.obj.capExternal=o.obj.capWrapExternal.find(".ddGM-caption");o.registerEvent("changeStart",e,"changeCap");o.registerEvent("midAnim",e,"showCap");o.registerEvent("loadEnd",e,"changeCap");if(o.opt.modules[e].internal){if(o.opt.modules[e].hide){o.registerEvent("changeEnd",e,"startTimer");if(o.opt.modules[e].showOnHover){o.registerEvent("changeStart",e,"showCap")}if(o.opt.modules[e].showOnHover){o.registerEvent("mouseIn",e,"showCap");o.registerEvent("touchEndUp",e,"hideCap");o.registerEvent("mouseOut",e,"startTimer")}}else{o.registerEvent("loadEnd",e,"showCap");o.registerEvent("changeStart",e,"showCap")}o.states.capHidden=true;o.states.capHeight=0}o.registerEvent("unload",e,"unload");if(d!=null){d.resolve()}})})},changeCap:function(t){var d=this,o=d.obj.capAll.html(),a=d.items[d.states.clicked!=""?d.states.clicked:d.states.current].caption;switch(a){case undefined:case"":case" ":a="&nbsp;"}d.obj.capAll.stop(1,1).css({opacity:0}).html(a);d.states.capHeight=d.obj.capInternal.outerHeight();d.obj.capAll.html(o).css({opacity:1}).animate({opacity:0},d.opt.modules[e].fadeOutSpeed,function(){$(this).html(a).animate({opacity:1},d.opt.modules[e].fadeInSpeed)});if(t!=null){t.resolve()}},hideCap:function(t){var d=this;clearTimeout(d.timers.capTimer);d.obj.capWrapInternal.stop(1,0).animate({height:0},d.opt.modules[e].slideOutSpeed);d.states.capHidden=true;if(t!=null){t.resolve()}},showCap:function(t){var d=this,o=false,a=d.states.clicked!=""?d.states.clicked:d.states.current,s=d.items[a].caption;clearTimeout(d.timers.capTimer);switch(s){case undefined:case null:case"":case" ":case"&nbsp;":o=true}if(o){window.ddGM.modules[e].hideCap.call(d,null);if(t!=null){t.resolve()}return}d.obj.capWrapInternal.stop(1,0).animate({height:d.states.capHeight},d.opt.modules[e].slideInSpeed);d.states.capHidden=false;if(t!=null){t.resolve()}},startTimer:function(t){var d=this;if(d.opt.modules[e].hide&&(!d.states.hover||!d.opt.modules[e].showOnHover)){clearTimeout(d.timers.capTimer);d.timers.capTimer=setTimeout(function(){window.ddGM.modules[e].hideCap.call(d,null)},d.opt.modules[e].hideDelay)}if(t!=null){t.resolve()}},unload:function(e){var t=this;clearTimeout(t.timers.capTimer);t.obj.capWrapAll.remove();if(e!=null){e.resolve()}}};if(!window.ddGM){window.ddGM={}}if(!window.ddGM.modules){$.extend(window.ddGM,{modules:{}})}window.ddGM.modules[e]=d})();