/* /////////////////////////////////////////////////////
 * Dot Navigation module for ddGM
 * v 1.0 :: 2012-10-02
//////////////////////////////////////////////////////*/
(function(){var b="dotNav",a={toGallery:true,toControl:false,selectors:undefined,numbers:false},c={initialize:function(e){var d=this;d.opt.modules[b]=$.extend(a,d.opt.modules[b]);d.registerEvent("loadEnd",b,"addDots");d.registerEvent("midAnim",b,"selectDot");d.registerEvent("unload",b,"unload");e.resolve()},addDots:function(e){var d=this;parents=$(),dots="";if(d.opt.modules[b].toGallery){parents=parents.add(d.gal)}if(d.opt.modules[b].toControl){parents=parents.add(d.obj.control)}if(d.opt.modules[b].selectors){parents=parents.add(d.opt.modules[b].selectors)}parents.append('<div class="ddGM-dotNav-wrapper"></div>').ready(function(){var f="",g=1;d.obj.dotNavWrap=parents.find(".ddGM-dotNav-wrapper");d.obj.dotNavWrap.css({"z-index":d.layers.controls});$.each(d.itemList,function(h,j){var i=(d.opt.modules[b].numbers)?g:"";f+='<a href="#" data-item="'+j+'" class="ddGM-dot'+(i?"-numbered":"")+" "+j+'">'+i+"</a>";g++});d.obj.dotNavWrap.append('<div class="ddGM-dotNav">'+f+"</div>").ready(function(){d.obj.dotNav=d.obj.dotNavWrap.children(".ddGM-dotNav");d.obj.dotNav.css({"z-index":d.layers.controls});d.obj.dotNav.children("."+d.itemList[d.opt.startItem]).addClass("selected");d.obj.dotNav.children("a").on("click",function(h){h.preventDefault();if(!d.states.changing){d.states.navSource="direct";d.changeItem.call(d,null,$(this).data("item"))}});e.resolve()})})},selectDot:function(e){var d=this;d.obj.dotNav.children("a").removeClass("selected");d.obj.dotNav.children("."+d.states.clicked||d.states.current).addClass("selected");e.resolve()},unload:function(e){var d=this;d.obj.dotNav.children("a").off("click");d.obj.dotNav.remove();e.resolve()}};if(!window.ddGM){window.ddGM={}}if(!window.ddGM.modules){$.extend(window.ddGM,{modules:{}})}window.ddGM.modules[b]=c})();