/* /////////////////////////////////////////////////////
 * Push Animation for ddGM
 * v 1.0 :: 2012-10-02
//////////////////////////////////////////////////////*/
(function(){var a="push",b={type:"horizontal",reverse:false,speed:750,easing:undefined,easingIn:"swing",easingOut:"swing"},c={initialize:function(e){var d=this;d.opt.animations[a]=$.extend(b,d.opt.animations[a]);d.opt.animations[a].easingIn=(!d.opt.animations[a].easing)?d.opt.animations[a].easingIn:d.opt.animations[a].easing;d.opt.animations[a].easingOut=(!d.opt.animations[a].easing)?d.opt.animations[a].easingOut:d.opt.animations[a].easing;e.resolve()},animate:function(e,k,h,f,g){var d=this,j=["horizontal","vertical"],i=(d.opt.animations[a].type=="random")?j[Math.round(Math.random()*j.length)-1]:d.opt.animations[a].type;d.deferreds.animPush=[$.Deferred(),$.Deferred()];g=(d.opt.animations[a].reverse=="random")?Math.round(Math.random()):d.opt.animations[a].reverse?!g:g;h.css({zIndex:d.layers.stageTop});f.css({zIndex:d.layers.stageBottom});if(h!=undefined){window.ddGM.anims[a].animIn.call(d,d.deferreds.animPush[0],h,i,g)}else{d.deferreds.animPush[0].resolve()}if(f!=undefined){window.ddGM.anims[a].animOut.call(d,d.deferreds.animPush[1],f,i,g)}else{d.deferreds.animPush[1].resolve()}$.when(d.deferreds.animPush[0],d.deferreds.animPush[1]).done(k.resolve);e.resolve()},animIn:function(e,k,j,f){var d=this,l,h={w:d.obj.stage.width(),h:d.obj.stage.height()},g={w:k.width(),h:k.height(),x:parseInt(k.css("left"),10),y:parseInt(k.css("top"),10)};if(j=="horizontal"){l=f?((g.w>h.w)?h.w:(h.w+g.x)):((g.w>h.w)?(g.w*-1):(g.x-h.w));k.css({left:l}).animate({left:g.x},d.opt.animations[a].speed,d.opt.animations[a].easingIn,e.resolve)}else{l=f?(h.h+g.y):((g.y>h.h)?(g.h*-1):(g.y-h.h));k.css({top:l}).animate({top:g.y},d.opt.animations[a].speed,d.opt.animations[a].easingIn,e.resolve)}},animOut:function(f,l,k,g){var d=this,e,j={w:d.obj.stage.width(),h:d.obj.stage.height()},h={w:l.width(),h:l.height(),x:parseInt(l.css("left"),10),y:parseInt(l.css("top"),10)};if(k=="horizontal"){e=!g?((h.w>j.w)?j.w:(j.w+h.x)):((h.w>j.w)?(h.w*-1):(h.x-j.w));l.css({left:h.x}).animate({left:e},d.opt.animations[a].speed,d.opt.animations[a].easingOut,function(){$(this).css({left:h.x,opacity:0});f.resolve()})}else{e=!g?((h.h>j.h)?j.h:(j.h+h.y)):((h.y>j.h)?(h.h*-1):(h.y-j.h));l.css({top:h.y}).animate({top:e},d.opt.animations[a].speed,d.opt.animations[a].easingOut,function(){$(this).css({top:h.y,opacity:0});f.resolve()})}}};if(!window.ddGM){window.ddGM={}}if(!window.ddGM.anims){$.extend(window.ddGM,{anims:{}})}window.ddGM.anims[a]=c})();